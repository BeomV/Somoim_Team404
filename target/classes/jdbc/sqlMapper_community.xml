<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="test.com.moim.community">
    <select id="CB_SELECT_ALL" resultType="test.com.moim.community.model.CommunityVO">
        select *
        from community_board order by num desc
    </select>

    <select id="CB_SELECT_ONE" resultType="test.com.moim.community.model.CommunityVO">
        select *
        from community_board
        where num = #{num}
    </select>


    <select id="CB_SEARCH_LIST_TITLE" resultType="test.com.moim.community.model.CommunityVO">
        select *
        from community_board
        where title like #{searchWord}
    </select>

    <select id="CB_SEARCH_LIST_CONTENT" resultType="test.com.moim.community.model.CommunityVO">
        select *
        from community_board
        where content like #{searchWord}
    </select>

    <select id="CB_SEARCH_LIST_USER_ID" resultType="test.com.moim.community.model.CommunityVO">
        select *
        from community_board
        where user_id like #{searchWord}
    </select>

    <select id="CB_SEARCH_LIST_save_img" resultType="test.com.moim.community.model.CommunityVO">
        select *
        from community_board
        where save_img like #{searchWord}
    </select>

    <insert id="CB_INSERT" parameterType="test.com.moim.community.model.CommunityVO">

        insert into community_board(num, title, user_id, content, save_img)
        values (seq_community_board.nextval, #{title}, #{user_id}, #{content}, #{save_img})

    </insert>

    <update id="CB_UPDATE" parameterType="test.com.moim.community.model.CommunityVO">
        update community_board
        set title=#{title},
            content=#{content},
            write_date=sysdate,
            save_img=#{save_img}
        where num = #{num}
    </update>

    <select id="CB_SELECT_SAVE_NAME" resultType="test.com.moim.community.model.CommunityVO">
        select * from userinfo
    </select>

    <!-- 	<update id="CB_good_count_UP" parameterType="test.com.moim.community.model.CommunityVO"> -->
    <!-- 		update community_board set view_count=view_count+1 -->
    <!-- 		where num = #{num} -->
    <!-- 	</update> -->
    <!-- 	#{user_id, jdbcType=VARCHAR} !!!!!!!!!!!!!!!!!-->
    <!-- 	<update id="CB_view_count_UP" parameterType="test.com.moim.community.model.CommunityVO"> -->
    <!-- 		update community_board set good_count=good_count+1 -->
    <!-- 		where num = #{num} -->
    <!-- 	</update> -->

    <delete id="CB_DELETE">
        delete
        from community_board
        where num = #{num}
    </delete>

</mapper>
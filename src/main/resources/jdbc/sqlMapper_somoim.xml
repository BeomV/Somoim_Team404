<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="test.com.moim.somoim">
	<select id="SOMOIM_SELECT_ALL" resultType="test.com.moim.somoim.model.SomoimVO">
		select * from somoim order by num desc
	</select>
	
	<select id="SOMOIM_SELECT_ONE" resultType="test.com.moim.somoim.model.SomoimVO">
		select * from somoim where num = #{num}
	</select>
	
	<select id="SELECT_MYPAGE" resultType="test.com.moim.somoim.model.SomoimVO">
		select * from somoim where num = #{num}
	</select>
	
	<select id="SELECT_SOMOIM" resultType="test.com.moim.somoim.model.SomoimVO">
		select * from somoim_member a join somoim b on a.somoim_num=b.num where somoim_num=#{somoim_num}
	</select>
	
	<select id="SOMOIM_SEARCH_LIST_TITLE" resultType="test.com.moim.somoim.model.SomoimVO" parameterType="HashMap">
		select * from somoim where som_title like #{searchWord} and category=#{category}
	</select>
	
	<select id="SOMOIM_SEARCH_LIST_TITLE2" resultType="test.com.moim.somoim.model.SomoimVO">
		select * from somoim where som_title like #{searchWord}
	</select>
	
	<select id="SOMOIM_SEARCH_LIST_AREA" resultType="test.com.moim.somoim.model.SomoimVO" parameterType="HashMap">
		select * from somoim where area like #{searchWord} and category=#{category}
	</select>
	<select id="SOMOIM_SEARCH_LIST_AREA2" resultType="test.com.moim.somoim.model.SomoimVO">
		select * from somoim where area like #{searchWord}
	</select>
	
	<insert id="SOMOIM_INSERT" parameterType="test.com.moim.somoim.model.SomoimVO">
		insert into somoim (num,som_title,category,max_member,create_date,area, som_content, somoim_img) 
		values(seq_somoim.nextval,#{som_title},#{category},#{max_member},sysdate,#{area}, #{som_content}, #{save_name})
	</insert>
	
	<update id="SOMOIM_UPDATE" parameterType="test.com.moim.somoim.model.SomoimVO">
		update somoim set category=#{category.val}, area=#{area}, som_content=#{som_content} where num = #{num}
	</update>
	
	<delete id="SOMOIM_DELETE">
		delete from somoim where num = #{num}
	</delete>

</mapper>